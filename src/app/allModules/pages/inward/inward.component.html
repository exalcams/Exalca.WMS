<div id="chat" class="page-layout carded fullwidth inner-scroll">
  <!-- <div class="top-bg accent"></div> -->
  <div fusePerfectScrollbar>
    <div fxLayout="column" fxLayoutAlign="center" fxLayoutGap="10px">
      <form name="form" [formGroup]="GRNHeadCreationFormGroup">
        <mat-card class="m-12 p-12" style="border-radius: 10px;">
          <mat-card-header>
            <mat-card-title class="my-4 boldClass">
              Create GRN
            </mat-card-title>
          </mat-card-header>
          <mat-divider></mat-divider>
          <mat-card-content>
            <div fxLayout class="mt-8">
              <div fxFlex="25" fxLayout>
                <div fxFlex="25" class="labelClass ml-12" fxLayoutAlign="end satrt">Vendor</div>
                <mat-form-field appearance="outline" class="mx-12" fxflex="75">
                  <!-- <mat-select style="min-width: 150px" matInput formControlName="GRNHeadType">
                    <mat-option *ngFor="let temp of AllGRNHeads" [value]="temp.GRNHeadType">
                      {{temp.GRNHeadType}}
                    </mat-option>
                  </mat-select> -->
                  <input matInput formControlName="Vendor">
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('Vendor').touched &&  GRNHeadCreationFormGroup.get('Vendor').hasError('required')">
                    Vendor is required
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="25" fxLayout>
                <div fxFlex="25" class="labelClass ml-12" fxLayoutAlign="end satrt">Date</div>
                <mat-form-field appearance="outline" class="mx-12" fxflex="75">
                  <input matInput [matDatepicker]="picker" formControlName="Date" (click)="picker.open()">
                  <!-- <mat-datepicker-toggle matSuffix [for]="picker">
                  </mat-datepicker-toggle> -->
                  <mat-datepicker #picker></mat-datepicker>
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('Date').touched &&  GRNHeadCreationFormGroup.get('Date').hasError('required')">
                    Date is required
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="25" fxLayout>
                <div fxFlex="25" class="labelClass ml-12" fxLayoutAlign="end satrt">Time</div>
                <mat-form-field appearance="outline" class="mx-12" fxflex="75">
                  <input matInput formControlName="Time">
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('Time').touched &&  GRNHeadCreationFormGroup.get('Time').hasError('required')">
                    Time is required
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="25" fxLayout>
                <div fxFlex="25" class="labelClass ml-12" fxLayoutAlign="end satrt">Mode</div>
                <mat-form-field appearance="outline" class="mx-12" fxflex="75">
                  <input matInput formControlName="Mode">
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('Mode').touched &&  GRNHeadCreationFormGroup.get('Mode').hasError('required')">
                    Mode is required
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div fxLayout class="mt-8">
              <div fxFlex="50" fxLayout>
                <div fxFlex="12.5" class="labelClass ml-12" fxLayoutAlign="end satrt">Address</div>
                <mat-form-field appearance="outline" class="mx-12" fxFlex="87.5">
                  <input matInput formControlName="Address">
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('Address').touched &&  GRNHeadCreationFormGroup.get('Address').hasError('required')">
                    Address is required
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="25" fxLayout>
                <div fxFlex="25" class="labelClass ml-12" fxLayoutAlign="end satrt">Bill Date</div>
                <mat-form-field appearance="outline" class="mx-12" fxflex="75">
                  <input matInput [matDatepicker]="picker1" formControlName="BillDate" (click)="picker1.open()">
                  <!-- <mat-datepicker-toggle matSuffix [for]="picker1">
                  </mat-datepicker-toggle> -->
                  <mat-datepicker #picker1></mat-datepicker>
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('BillDate').touched &&  GRNHeadCreationFormGroup.get('BillDate').hasError('required')">
                    Bill Date is required
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="25" fxLayout>
                <div fxFlex="25" class="labelClass ml-12" fxLayoutAlign="end satrt">Bill No.</div>
                <mat-form-field appearance="outline" class="mx-12" fxflex="75">
                  <input matInput formControlName="BillNumber">
                  <mat-error
                    *ngIf="GRNHeadCreationFormGroup.get('BillNumber').touched &&  GRNHeadCreationFormGroup.get('BillNumber').hasError('required')">
                    Bill Number is required
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
        <mat-card class="m-12 p-0" style="border-radius: 10px;">
          <div fxLayout>
            <div fxFlex="99.9">
              <div fxFlex>
                <mat-card class="p-0 m-20 mat-elevation-z8">
                  <div fxLayout="row" class="pt-8">
                    <div fxFlex class="boldClass pl-12">GRN Items</div>
                    <div fxFlex align="end">
                      <img class="pr-8" matTooltip="Add" (click)="AddGRNItem()" src="assets/images/plus.png">
                      <!-- <img class="pl-8 pr-16" matTooltip="Remove" (click)="RemoveGRNItem()"
                        src="assets/images/remove.png"> -->
                    </div>
                  </div>
                  <div fxLayout="row" class="borderTop mt-4"></div>
                  <table *ngIf="GRNItemDataSource?.value?.length" mat-table [dataSource]="GRNItemDataSource"
                    class="mat-elevation-z8" formArrayName="GRNItems">
                    <tr mat-header-row *matHeaderRowDef="GRNItemColumns; sticky: true">
                    </tr>
                    <tr mat-row *matRowDef="let row;let i = index; columns: GRNItemColumns;"></tr>

                    <ng-container matColumnDef="Article">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass"> Article </th>
                      <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <input matInput formControlName="Article">
                        <span class="pl-4 errorClass" *ngIf="GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Article').touched &&
                  GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Article').hasError('required')">
                          *
                        </span>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="Code">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass"> Code </th>
                      <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <input matInput formControlName="Code">
                        <span class="pl-4 errorClass" *ngIf="GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Code').touched &&
                    GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Code').hasError('required')">
                          *
                        </span>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="Description">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass"> Description </th>
                      <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <input matInput formControlName="Description">
                        <span class="pl-4 errorClass" *ngIf="GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Description').touched &&
                    GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Description').hasError('required')">
                          *
                        </span>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="Batch">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass"> Batch </th>
                      <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <input matInput formControlName="Batch">
                        <span class="pl-4 errorClass" *ngIf="GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Batch').touched &&
                    GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Batch').hasError('required')">
                          *
                        </span>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="Quantity">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass"> Quantity </th>
                      <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <input matInput formControlName="Quantity">
                        <span class="pl-4 errorClass" *ngIf="GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Quantity').touched &&
                      GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('Quantity').hasError('required')">
                          *
                        </span>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="UOM">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass"> UOM </th>
                      <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                        <input matInput formControlName="UOM">
                        <span class="pl-4 errorClass" *ngIf="GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('UOM').touched &&
                      GRNHeadCreationFormGroup.get('GRNItems').controls[index].get('UOM').hasError('required')">
                          *
                        </span>
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="Action">
                      <th mat-header-cell *matHeaderCellDef class="boldItalicClass">Action</th>
                      <td mat-cell *matCellDef="let row;let index = index" class="rightAlignClass">
                        <!-- <mat-icon>image</mat-icon> -->
                        <img matTooltip="Remove" (click)="RemoveGRNItem(index)" class="imgClass"
                          src="assets/images/remove.png">
                      </td>
                    </ng-container>

                  </table>

                </mat-card>
              </div>
            </div>
            <div fxFlex="0.1">
              <div style="min-height:40vh !important;"></div>
            </div>
          </div>
        </mat-card>
      </form>
    </div>
    <mat-progress-spinner *ngIf="IsProgressBarVisibile" class="ProgressBarPostion1" color="accent" mode="indeterminate">
    </mat-progress-spinner>
    <div id="overlay" *ngIf="IsProgressBarVisibile"></div>
  </div>
</div>